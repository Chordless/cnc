= The ERK-1 CNC
:toc:

Designing, building & blogging a small desktop CNC.

.Current machine status
image::images/status.png[]

== What's going on here then?
I'm designing a tiny desktop-friendly CNC. This repository will contain the design files, and I'm also blogging about the project in this readme file.

== Why yet another CNC design?
There are lots of great, free-to-build CNC designs already in existence on the internet. But, there is one particular type of CNC machine that I simply have not found any DIY designs for: The desktop micro mill. Think of those machines dentists use to create dental prostheses. Fully enclosed, tiny CNC machines you can use in an office: not too noisy, and not spewing dust everywhere. Something you could use while living in an apartment for experimenting and learning about CNC, and then being able to stow it away under the desk when not in use.

== Goals
* Apartment friendly
  - Quiet _enough_. CNC cutting will never be silent, but I'm trying to keep it quiet enough that the neighbors don't call the cops.
  - Dust control. CNCs can spew out lots of fine wood dust, and this would be terrible in an apartment. The machine must be fully enclosed, have controlled negative air pressure and a filter for catching all the dust. It needs something like a built-in vaccum cleaner.
  - Stowable. It should all be contained in a single unit, that you can pick up off the desk and stow in a closet. This also means it must be light enough that one person can feasibly carry it.
* Inexpensive
  - I'm going for a price of around 300-400$
* Possible to build without another CNC / Laser cutter. Some parts will unfortunately require a 3D printer. The machine frame will be mostly made out of wood.
* Smallest possible footprint. I'm inspired by the amazingly small Voron 0 3D printer, but will have to scale up a bit from that ideal.


== Non-goals
* Metal milling
  - Out of the question. Nope. Not doing it. This will be a machine that can cut wood, plastics and modeling foam.
* Big working area
  - Not a goal at all. The machine footprint will be tiny in DIY CNC terms, and the cutting area will be even smaller. I'm totally fine with a toy-like working area of 10cm x 13cm x 2cm.
* Precision
  - It would be nice if a tiny mill could mill tiny parts accurately. But this one won't. I'll be using cheap parts. Hopefully some of the parts can be "upgraded" for those with a larger bugdet, without requiring a redesign of the machine. Like using proper brand name linear bearings instead of the bottom dollar stuff I will be using. The bearing form factor will still be the same.


== (Planned) Machine specs

- Fixed-gantry CNC machine
- 200W spindle
- 8mm linear rods for Z-axis
- 12mm linear rods for X- and Y-axes
- T8 Leadscrew and brass nuts for all axes
- NEMA 17 Stepper motors
- Auto homing - Sensorless, so it can be homed in all directions (X-,X+,Y-,Y+,Z-,Z+)
- Fully enclosed
- Integrated dust filter
- Small desktop footprint (let's say less than 40cm cubed)
- Working area of around 130 x 100 x 40 mm (X, Y, Z)


== Bill Of Materials
I haven't designed the whole machine yet, so lots of things are missing in this section.


=== Electronics
- Controller board: `MKS GEN_L V2.1`
- Stepper motor drivers: 3x `TMC2209 V1.2`. These are silent, have software controlled current settings and support sensorless homing. With these, the machine won't need limit switches.
- Steppers:
  * 2x large `NEMA 17` stepper motors. The X- and Y-axis motors will be stationary, and they can be larger (longer) than the Z motor.
  * 1x normal-sized `NEMA 17` stepper motor for the Z-axis. This will be moving as part of the X-carriage, so it shouldn't be too heavy.
- LCD screen: `RepRapDiscount Full Graphic Smart LCD Controller`
- Wifi controller and web UI: A `Raspberry Pi` running chilipeppr or similar program.
- Spindle Motor: https://www.aliexpress.com/item/32908212687.html[Chinese 200W ER11 spindle with bracket]


== Update 1 - 2021-03-18

.Humble beginnings
image::images/updates/01/status.png[]


I've started sketching up the frame in Fusion 360. The rough design plan is:

- A cutting area in the upper front part of the machine.
  * Y-carriage moving from front to rear.
  * X-carriage moving from side to side
  * Z-carriage mounted on the X axis, moving up and down.
- A space under the machine for power-supplies etc.
- A space in the upper rear part of the machine for the motion controller and Raspberry Pi.
- A space in the lower rear part the machine for a powerful exhaust fan and some kind of dust filter. Perhaps this will contain a vaccum cleaner bag, and literally work as a built-in vacuum cleaner.

image::images/updates/01/section.png[500,500]

Eventually I realized that the shape and size of the frame is very dependent on the size and position of the spindle. I've made it my first goal to design the Z axis, and to make it as compact as possible. This will determine how small I can make the overall machine. As for the spindle, I'm currently designing for a 200W cheap chinese spindle motor. It seems small enough, yet should be able to cut small pieces of wood nicely.

image::images/updates/01/spindle.png[]

As part of the Z axis design, I'm making CAD models of some of the "standard" linear motion parts I expect to be using. I might even 3D print these models and use them as "mock" parts when prototyping the machine. I still haven't decided on the bearing form factors I will be using, and when I order them it will easily take one or two months before they arrive. Being able to assemble a "fake" version of the Z axis using plastic parts will probably be useful!

image:images/updates/01/LMK8UU v4.png[200,200]
image:images/updates/01/T8 Brass Nut v2.png[200,200]
image:images/updates/01/Spindle Clamp 52mm v2.png[200,200]
image:images/updates/01/Spindle 200W v2.png[200,300]

== Update 2 - 2021-03-19

.It's not easy being small
image::images/updates/02/status.png[]

I've designed a first version of the Z-carriage and started on the X-carriage it rides on.
This machine is inspired by the tiny Voron 0 3D printer, which has _outside_ dimensions of 24 cm cubed. Right now my frame sketch has those _inside_ dimensions in the cutting chamber, so it's already larger than the Voron. And I've designed a Z-axis as small as I could without getting into weird tricks.

And yeah, that's the Z axis stepper motor poking through the top. _Oops._ I can expand the machine dimensions a bit more, but I don't want to go *that* big. I'll have to redesign these parts and save space wherever I can.

=== Z-carriage
The Z-carriage itself is pretty small. Most of it consists of the spindle mount bracket, and a small 3D-printed block to hold 4 bearings and a nut. If I'm sticking with a 52mm diameter spindle, and the metal bracket, there's not much space that can be saved here.

image:images/updates/02/z-carriage.png[,400]
image:images/updates/02/z-carriage_rear.png[,400]
image:images/updates/02/z-carriage_top.png[,300]

I actually don't want to use 3D-printed parts in this particular part of the machine. Anywhere but here. The spindle can get pretty hot, and that heat will creep into the 3D-printed block. I don't want to worry about my machine parts melting when I use the machine, so I'll have to pull some tricks here. Perhaps I can design in a sheet of plywood between the aluminium bracket and the 3D-printed block, as thermal insulation. We'll see.

=== X-carriage / Z-axis
The first X-carriage design is a simple box made from 3D-printed parts.
(The stepper motor and coupling don't quite line up with the brass nut in the z-carriage. I'll rework it later.)

image:images/updates/02/x-carriage.png[600, 600]

There's probably a bit of space to save here.

- The box sides aren't _necessary_. They do help with rigidity though.
- Perhaps the axis could be folded, using a belt drive, so that the stepper motor isn't on top. I don't know where else i want to put it though.
- The whole axis could be made shorter.

image:images/updates/02/x-carriage_coupling.png[600, 600]

In this image, the axis is all the way up, at the end of it's 40mm travel. The stepper motor shaft and flexible coupling make me waste quite a lot of space. Without those, the box could be shortened so the Z-axis bearings touch the top of the box in this position. If I choose a stepper motor with an integrated 100mm leadscrew, instead of a regular shaft, I can save 30mm of height here. That's probably too good to pass up.


== Update 3 - 20201-03-22

.Redesigned Z-axis
image::images/updates/03/status.png[]

I managed to improve the Z-axis and shrink it down to something usable. I still had to increase the height of the machine a bit, but not that much.
Before and after shots of the Z-axis:

image:images/updates/02/x-carriage_coupling.png[,500]
image:images/updates/03/x-carriage_coupling.png[,420]

The images are not to scale, so it's not a perfect comparison. The box has been shortened a lot, and the plastic sides are gone. I added clearance for the stepper motor coupler to the Z-carriage part, so I don't have to use a special stepper motor with integrated leadscrew after all. The Z-carriage now moves all the way up so it touches the plate holding the stepper motor, and axis travel is still 40mm.

The Z-axis and X-carriage is now complete, so I will print this version and see if things fit together as planned.

image::images/updates/03/x-carriage.png[]

image::images/updates/03/x-carriage_rear.png[]

I will also be liberally using "mock" parts for this test assembly, since no linear motion parts have been ordered from ebay yet. A bunch of more standard parts were modeled:

image:images/updates/03/mocks/608ZZ Bearing v2.png[,150]
image:images/updates/03/mocks/Flexible Coupling v2.png[,200]
image:images/updates/03/mocks/LMK8LUU v2.png[,250]
image:images/updates/03/mocks/LMK12UU v2.png[,270]
image:images/updates/03/mocks/NEMA 17 37mm v4.png[,300]
image:images/updates/03/mocks/NEMA 17 60mm v2.png[,300]

The next step of the design is to revisit the machine frame. I want to make some layout changes before properly designing in the X-axis.